!function(a,b){"use strict";function c(){this.models={},this.collections={},this.views={}}a.wp=a.wp||{},wp.api=wp.api||new c}(window),function(a,b){"use strict";if(a.wp=a.wp||{},wp.api=wp.api||{},wp.api.utils=wp.api.utils||{},!Date.prototype.toISOString){var c=function(a){var b=String(a);return 1===b.length&&(b="0"+b),b};Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}wp.api.utils.parseISO8601=function(a){var c,d,e,f,g=0,h=[1,4,5,6,7,10,11];if(d=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(a)){for(e=0;f=h[e];++e)d[f]=+d[f]||0;d[2]=(+d[2]||1)-1,d[3]=+d[3]||1,"Z"!==d[8]&&d[9]!==b&&(g=60*d[10]+d[11],"+"===d[9]&&(g=0-g)),c=Date.UTC(d[1],d[2],d[3],d[4],d[5]+g,d[6],d[7])}else c=Date.parse?Date.parse(a):NaN;return c},wp.api.utils.getRootUrl=function(){return a.location.origin?a.location.origin+"/":a.location.protocol+"/"+a.location.host+"/"},wp.api.utils.capitalize=function(a){return _.isUndefined(a)?a:a.charAt(0).toUpperCase()+a.slice(1)},wp.api.utils.extractRoutePart=function(a,b){b=b||1,a=a.replace(wp.api.versionString,"");var c=a.split("/").reverse();return _.isUndefined(c[--b])?"":c[b]},wp.api.utils.extractParentName=function(a){var b,c=a.lastIndexOf("_id>[\\d]+)/");return 0>c?"":(b=a.substr(0,c-1),b=b.split("/"),b.pop(),b=b.pop())}}(window),function(a,b,c,d,e){"use strict";a.api.WPApiBaseModel=c.Model.extend({sync:function(a,d,e){if(e=e||{},"undefined"!=typeof b.nonce){var f=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-WP-Nonce",b.nonce),f?f.apply(this,arguments):void 0}}return c.sync(a,d,e)}}),a.api.models.Schema=a.api.WPApiBaseModel.extend({url:b.root+"wp/v2",defaults:{namespace:"",_links:"",routes:{}},save:function(){return!1},destroy:function(){return!1}})}(wp,WP_API_Settings,Backbone,window),function(a,b,c,d,e,f){"use strict";a.api.WPApiBaseCollection=c.Collection.extend({initialize:function(a,b){this.state={data:{},currentPage:null,totalPages:null,totalObjects:null},d.isUndefined(b)?this.parent="":this.parent=b.parent},sync:function(a,e,f){f=f||{};var g=f.beforeSend,h=this;if("undefined"!=typeof b.nonce&&(f.beforeSend=function(a){return a.setRequestHeader("X-WP-Nonce",b.nonce),g?g.apply(h,arguments):void 0}),"read"===a){f.data?(h.state.data=d.clone(f.data),delete h.state.data.page):h.state.data=f.data={},"undefined"==typeof f.data.page?(h.state.currentPage=null,h.state.totalPages=null,h.state.totalObjects=null):h.state.currentPage=f.data.page-1;var i=f.success;f.success=function(a,b,c){return h.state.totalPages=parseInt(c.getResponseHeader("x-wp-totalpages"),10),h.state.totalObjects=parseInt(c.getResponseHeader("x-wp-total"),10),null===h.state.currentPage?h.state.currentPage=1:h.state.currentPage++,i?i.apply(this,arguments):void 0}}return c.sync(a,e,f)},more:function(a){if(a=a||{},a.data=a.data||{},d.extend(a.data,this.state.data),"undefined"==typeof a.data.page){if(!this.hasMore())return!1;null===this.state.currentPage||this.state.currentPage<=1?a.data.page=2:a.data.page=this.state.currentPage+1}return this.fetch(a)},hasMore:function(){return null===this.state.totalPages||null===this.state.totalObjects||null===this.state.currentPage?null:this.state.currentPage<this.state.totalPages}})}(wp,WP_API_Settings,Backbone,_,window),function(a,b){"use strict";wp.api.init=function(a,b){wp.api.apiRoot=a||WP_API_Settings.root,wp.api.versionString=b||"wp/v2/";var c;!_.isUndefined(sessionStorage)&&sessionStorage.getItem("wp-api-schema-model")?(c=new wp.api.models.Schema(JSON.parse(sessionStorage.getItem("wp-api-schema-model"))),wp.api.constructFromSchema(c)):(c=new wp.api.models.Schema,c.fetch({success:function(a){_.isUndefined(sessionStorage)||sessionStorage.setItem("wp-api-schema-model",JSON.stringify(a)),wp.api.constructFromSchema(a)},error:function(){}}))},wp.api.constructFromSchema=function(a){var b=[],c=[],d=wp.api.apiRoot.replace(wp.api.utils.getRootUrl(),"");_.each(a.get("routes"),function(a,e){e!==wp.api.versionString&&e!==d&&e!=="/"+wp.api.versionString.slice(0,-1)&&(e.endsWith("+)")?b.push({index:e,route:a}):c.push({index:e,route:a}))}),_.each(b,function(a){var b,c=wp.api.utils.extractRoutePart(a.index,2),d=wp.api.utils.extractRoutePart(a.index,4);""!==d&&d!==c?(b=wp.api.utils.capitalize(d)+wp.api.utils.capitalize(c),wp.api.models[b]=wp.api.WPApiBaseModel.extend({url:function(){var a=wp.api.apiRoot+wp.api.versionString+d+"/"+this.get("parent")+"/"+c;return _.isUndefined(this.get("id"))||(a+="/"+this.get("id")),a},route:a})):(b=wp.api.utils.capitalize(c),wp.api.models[b]=wp.api.WPApiBaseModel.extend({url:function(){var a=wp.api.apiRoot+wp.api.versionString+c;return _.isUndefined(this.get("id"))||(a+="/"+this.get("id")),a},route:a}))}),_.each(c,function(a){var b,c=a.index.slice(a.index.lastIndexOf("/")+1),d=wp.api.utils.extractRoutePart(a.index,4);""!==d&&d!==c?(b=wp.api.utils.capitalize(d)+wp.api.utils.capitalize(c),wp.api.collections[b]=wp.api.WPApiBaseCollection.extend({url:function(){return wp.api.apiRoot+wp.api.versionString+d+"/"+this.parent+"/"+c},model:wp.api.models[b],route:a})):(b=wp.api.utils.capitalize(c),wp.api.collections[b]=wp.api.WPApiBaseCollection.extend({url:wp.api.apiRoot+wp.api.versionString+c,route:a}))})},wp.api.init()}(window);
//# sourceMappingURL=wp-api.min.js.map